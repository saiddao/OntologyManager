<!DOCTYPE html>
<html>

<head>
	<title>Ontology Manager Administrator (CNR):: webContent-Admin</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
			background-color: #F7F7F7;
		}

		header {
			background-color: #212529;
			color: white;
			padding: 10px;
		}

		nav {
			background-color: #FFFFFF;
			border-bottom: 1px solid #E5E5E5;
			display: flex;
			flex-direction: row;
			justify-content: space-between;
			align-items: center;
			padding: 10px;
			margin-bottom: 20px;
		}

		nav ul {
			list-style: none;
			margin: 0;
			padding: 0;
			display: flex;
			flex-direction: row;
			align-items: center;
		}

		nav li {
			margin-right: 20px;
		}

		nav a {
			text-decoration: none;
			color: #212529;
			padding: 10px;
			border-radius: 5px;
			transition: all 0.2s;
			border: none;
		}

		nav a:hover {
			background-color: #212529;
			color: white;
		}

		main {
			padding: 10px;
		}

		section {
			margin-bottom: 30px;
		}

		.container {
			max-width: 800px;
			margin: 20px auto;
			padding: 30px;
			background-color: #FFFFFF;
			border-radius: 10px;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
		}

		.form-control {
			margin-bottom: 20px;
		}

		.form-control label {
			display: block;
			font-size: 16px;
			font-weight: bold;
			margin-bottom: 5px;
		}

		.form-control input[type="file"] {
			display: block;
			margin-top: 5px;
			font-size: 16px;
			padding: 10px;
			border: none;
			border-radius: 5px;
			background-color: #F7F7F7;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
		}

		.form-control pre {
			font-size: 16px;
			padding: 10px;
			border: none;
			border-radius: 5px;
			background-color: #F2F2F2;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
			white-space: pre-wrap;
			word-wrap: break-word;
		}

		.btn {
			display: block;
			margin: 20px auto 0;
			padding: 10px 20px;
			border: none;
			border-radius: 5px;
			background-color: #212529;
			color: #FFFFFF;
			font-size: 16px;
			cursor: pointer;
			transition: all 0.2s;
		}

		.btn:hover {
			background-color: #FFFFFF;
			color: #212529;
		}

		/* Update shape */
		select,
		input[type="text"],
		textarea {
			padding: 10px;
			font-size: 16px;
			margin-bottom: 20px;
			border-radius: 5px;
			border: none;
			background-color: #F2F2F2;
			width: 100%;
			max-width: 400px;
		}

		/* Alternative CSS for file upload button */

		input[type="file"]::-webkit-file-upload-button {
			padding: 10px;
			font-size: 16px;
			background-color: #4CAF50;
			color: white;
			border-radius: 5px;
			border: none;
			cursor: pointer;
			transition: all 0.2s;
		}

		input[type="file"]::-webkit-file-upload-button:hover {
			background-color: #3E8E41;
		}

		/* Alternative CSS for select element */

		select {
			padding: 10px;
			font-size: 16px;
			border-radius: 5px;
			border: none;
			background-color: #F0F0F0;
			width: 100%;
			max-width: 400px;
			cursor: pointer;
			transition: all 0.2s;
		}

		select:hover {
			background-color: #E0E0E0;
		}

		select:focus {
			outline: none;
			box-shadow: 0 0 5px #0074D9;
		}

		/* Alternative CSS for button */

		.btn {
			display: block;
			margin: 20px auto 0;
			padding: 10px 20px;
			border: none;
			border-radius: 5px;
			background-color: #0074D9;
			color: white;
			font-size: 16px;
			cursor: pointer;
			transition: all 0.2s;
		}

		.btn:hover {
			background-color: #0063AF;
		}

		.btn:focus {
			outline: none;
			box-shadow: 0 0 5px #0074D9;
		}

		/* Alternative CSS for container */

		.container {
			max-width: 600px;
			margin: 20px auto;
			padding: 20px;
			background-color: white;
			border-radius: 10px;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
			transition: all 0.2s;
		}

		.container:hover {
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
		}

		.container:focus-within {
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.4);
		}

		/* Alternative CSS for form control */

		.form-control label {
			display: block;
			font-size: 16px;
			font-weight: bold;
			margin-bottom: 5px;
		}

		.form-control input[type="file"] {
			display: block;
			margin-top: 5px;
			font-size: 16px;
			padding: 10px;
			border: none;
			border-radius: 5px;
			background-color: #F0F0F0;
			box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
			transition: all 0.2s;
		}

		.form-control pre {
			font-size: 16px;
			padding: 10px;
			border: none;
			border-radius: 5px;
			background-color: #F0F0F0;
			box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
			white-space: pre-wrap;
			word-wrap: break-word;
		}

		.form-control input[type="file"]:focus,
		.form-control pre:focus {
			outline: none;
			box-shadow: 0 0 5px #0074D9;
		}
	</style>









</head>

<body>
	<header>
		<h1>Ontology Manager Administrator</h1>
	</header>
	<nav>
		<ul>
			<li><a href="#home" id="home">Home</a></li>
			<li><a href="#upload" id="upload-ontology">Upload</a></li>
			<li><a href="#navigate" id="navigate-ontology">Navigate</a></li>
			<li><a href="#delete" id="delete-ontology">Delete</a></li>
			<li><a href="#update" id="update-ontology">Update</a></li>
			<li><a href="#sosBlockly" id="map-sos-blockly-ontology">Map SoS Blockly Profile</a></li>
		</ul>
	</nav>
	<main>
		<section id="home-section">
			<h2>Welcome to the Ontology Manager Administrator</h2>
			<p>Use the menu above to navigate the various functionality available in the Ontology Manager tool.</p>
		</section>



		<!-- For UPLOADING Ontology -->
		<section id="upload-section">
			<h2>Upload</h2>
			<p>This is the section for uploading the ontology database file.</p>

			<div class="container">
				<form id="form" action="http://localhost:8282/ontologymanager/biecointerface/" method="post">
					<div class="form-control">
						<label for="file-input">Select a file:</label>
						<input type="file" id="file-input" name="file">
					</div>
					<div class="form-control">
						<label>File content:</label>
						<pre id="file-content"></pre>
					</div>
					<button type="submit" class="btn">Submit</button>
				</form>
			</div>


			<script>
				const form = document.getElementById('form');
				const fileInput = document.getElementById('file-input');
				const fileContent = document.getElementById('file-content');

				fileInput.addEventListener('change', (event) => {
					const file = event.target.files[0];
					const reader = new FileReader();
					reader.onload = (event) => {
						fileContent.textContent = event.target.result;
					};
					reader.readAsText(file);
				});

				form.addEventListener('submit', (event) => {
					event.preventDefault();
					const file = fileInput.files[0];
					const reader = new FileReader();
					reader.onload = (event) => {
						const content = event.target.result;
						fileContent.textContent = content;
						const xhr = new XMLHttpRequest();
						xhr.open('POST', 'http://localhost:8282/ontologymanager/biecointerface/', true);
						xhr.setRequestHeader('Content-Type', 'application/json');
						xhr.setRequestHeader('Authorization', 'qJACs1J0apruOOJCg');
						xhr.onload = function () {
							if (xhr.status === 200) {
								status.textContent = 'Upload successful!';
							} else {
								status.textContent = 'Upload failed: ' + xhr.status;
							}
						};
						const data = {
							jobID: '1234',
							timestamp: '',
							messageType: 'Data',
							sourceID: '4',
							event: {
								OntologyRequest: {
									operationName: 'uploadontology',
									ontologyContent: content
								}
							},
							crc: 1234567
						};
						xhr.send(JSON.stringify(data));
					};
					reader.readAsText(file);
				});
			</script>
		</section>





		<!-- For NAVIGATING Ontology -->

		<section id="navigate-section">
			<h2>Navigate</h2>
			<p>This is the section for navigating the ontology and selecting Monitoring Rules.</p>


			<h1>Select a System of Systems</h1>
			<select id="sos-selector">
			</select>

			<h1>Select a Device</h1>
			<select id="device-selector">
			</select>

			<h1>Select a Component</h1>
			<select id="component-selector">
			</select>

			<h1>Select a Skill</h1>
			<select id="skill-selector">
			</select>

			<h1>Select a Rule</h1>
			<select id="rule-selector">
			</select>

			<h1>Log Area</h1>
			<!-- 
			<div id="logArea"> Ontology Log</div>
			-->
			<div id="logArea"
				style="background-color: #f5f5f5; color: #555; font-size: 14px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 10px; border: 1px solid #ccc; border-radius: 5px; white-space: pre-wrap;">
			</div>



			<script>


				function resetSelectorsRSCD() {
					deviceSelectEl.value = '';
					componentSelectEl.value = '';
					skillSelectEl.value = '';
					ruleSelectEl.value = '';
				}
				function resetSelectorsRSC() {
					componentSelectEl.value = '';
					skillSelectEl.value = '';
					ruleSelectEl.value = '';
				}
				function resetSelectorsRS() {
					skillSelectEl.value = '';
					ruleSelectEl.value = '';
				}
				function resetSelectorsR() {
					ruleSelectEl.value = '';
				}

				function resetSelectors(level = 'RSCD') {
					switch (level) {
						case 'RSCD':
							deviceSelectEl.value = '';
						case 'SCD':
							componentSelectEl.value = '';
						case 'SD':
							skillSelectEl.value = '';
						case 'R':
							ruleSelectEl.value = '';
					}
				}

				const sosSelectEl = document.getElementById('sos-selector');
				const deviceSelectEl = document.getElementById('device-selector');
				const componentSelectEl = document.getElementById('component-selector');
				const skillSelectEl = document.getElementById('skill-selector');
				const ruleSelectEl = document.getElementById('rule-selector');



				fetchData('getsoss', 'sosId', 'sosName', sosSelectEl);

				sosSelectEl.addEventListener('change', () => {
					fetchData('getdevices', 'deviceId', 'deviceName', deviceSelectEl, 'sosId', sosSelectEl.value);
					resetSelectorsRSCD();
				});

				deviceSelectEl.addEventListener('change', () => {
					fetchData('getcomponents', 'componentId', 'componentName', componentSelectEl, 'sosId', sosSelectEl.value, 'deviceId', deviceSelectEl.value);
					resetSelectorsRSC();
				});

				componentSelectEl.addEventListener('change', () => {
					fetchData('getskills', 'skillId', 'skillName', skillSelectEl, 'sosId', sosSelectEl.value, 'deviceId', deviceSelectEl.value, 'componentId', componentSelectEl.value);
					resetSelectorsRS();
				});


				skillSelectEl.addEventListener('change', () => {
					fetchData('getrules', 'ruleId', 'ruleName', ruleSelectEl, 'sosId', sosSelectEl.value, 'deviceId', deviceSelectEl.value, 'componentId', componentSelectEl.value, "skillId", skillSelectEl.value);
					resetSelectorsR();
				});



				function fetchData(operationName, valueKey, textKey, selectEl, ...args) {
					const logArea = document.getElementById('logArea');

					const payload = {
						jobID: '1234',
						timestamp: '',
						messageType: 'Data',
						sourceID: '4',
						event: {
							OntologyRequest: {
								operationName
							}
						},
						crc: 1234567
					};

					if (args.length % 2 !== 0) {
						console.error('Invalid number of arguments');
						return;
					}

					for (let i = 0; i < args.length; i += 2) {
						payload.event.OntologyRequest[args[i]] = args[i + 1];
					}

					fetch('http://localhost:8282/ontologymanager/biecointerface/', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json',
							'Authorization': 'qJACs1J0apruOOJCg'
						},
						body: JSON.stringify(payload)
					})
						.then(response => response.json())
						.then(data => {
							// Remove previous options from the select element
							selectEl.innerHTML = '';

							// Concatenate payload and data and log in logArea
							const logData = {
								OM_Request: payload,
								OM_Response: data
							};

							logArea.innerText = JSON.stringify(logData, null, 2);


							// Add options to the select element
							data.forEach(item => {
								const optionEl = document.createElement('option');
								optionEl.value = item[valueKey];
								optionEl.text = item[textKey];
								selectEl.appendChild(optionEl);
							});
						})
						.catch(error => console.error(error));
				}


			</script>




		</section>
		<section id="delete-section">
			<h2>Delete</h2>
			<p>This is the section for deleting ontologies. </p>



		</section>



		<section id="update-section">
			<h2>Update</h2>
			<p>This is the section for updating ontologies.</p>


			<form>
				<h2>System of Systems</h2>
				<label for="sos-name">Name:</label>
				<input type="text" id="sos-name" name="sos-name" required>
				<button type="button" onclick="addSos()">Add</button>
				<button type="button" onclick="modifySos()">Modify</button>

				<h2>Device</h2>
				<label for="device-name">Name:</label>
				<input type="text" id="device-name" name="device-name" required>
				<label for="sos-selector">System of Systems:</label>
				<select id="sos-selector" required>
				</select>
				<button type="button" onclick="addDevice()">Add</button>
				<button type="button" onclick="modifyDevice()">Modify</button>

				<h2>Component</h2>
				<label for="component-name">Name:</label>
				<input type="text" id="component-name" name="component-name" required>
				<label for="device-selector">Device:</label>
				<select id="device-selector" required>
				</select>
				<button type="button" onclick="addComponent()">Add</button>
				<button type="button" onclick="modifyComponent()">Modify</button>

				<h2>Skill</h2>
				<label for="skill-name">Name:</label>
				<input type="text" id="skill-name" name="skill-name" required>
				<label for="component-selector">Component:</label>
				<select id="component-selector" required>
				</select>
				<button type="button" onclick="addSkill()">Add</button>
				<button type="button" onclick="modifySkill()">Modify</button>

				<h2>Rule</h2>
				<label for="rule-name">Name:</label>
				<input type="text" id="rule-name" name="rule-name" required>
				<label for="skill-selector">Skill:</label>
				<select id="skill-selector" required>
				</select>
				<button type="button" onclick="addRule()">Add</button>
				<button type="button" onclick="modifyRule()">Modify</button>
			</form>




		</section>
		
		
		
		<section id="map-sos-blockly-ontology">
			<h2>Map SoS Blockly Profile</h2>
			
			
			<p>Use this functionality for importing and mapping the SoSResilBlocky Profile to the DEAMON Ontology.
			Please Upload the .ecore file.</p>
		</section>
		
		
	</main>
	<script>
		// Get menu links and sections
		const homeLink = document.getElementById('home');
		const homeSection = document.getElementById('home-section');
		const uploadLink = document.getElementById('upload-ontology');
		const uploadSection = document.getElementById('upload-section');
		const navigateLink = document.getElementById('navigate-ontology');
		const navigateSection = document.getElementById('navigate-section');
		const deleteLink = document.getElementById('delete-ontology');
		const deleteSection = document.getElementById('delete-section');
		const updateLink = document.getElementById('update-ontology');
		const updateSection = document.getElementById('update-section');

		// Hide all sections except the home section on page load
		uploadSection.style.display = 'none';
		navigateSection.style.display = 'none';
		deleteSection.style.display = 'none';
		updateSection.style.display = 'none';

		// Add event listeners to menu links to show their respective sections
		homeLink.addEventListener('click', () => {
			homeSection.style.display = 'block';
			uploadSection.style.display = 'none';
			navigateSection.style.display = 'none';
			deleteSection.style.display = 'none';
			updateSection.style.display = 'none';
		});

		uploadLink.addEventListener('click', () => {
			homeSection.style.display = 'none';
			uploadSection.style.display = 'block';
			navigateSection.style.display = 'none';
			deleteSection.style.display = 'none';
			updateSection.style.display = 'none';
		});

		navigateLink.addEventListener('click', () => {
			homeSection.style.display = 'none';
			uploadSection.style.display = 'none';
			navigateSection.style.display = 'block';
			deleteSection.style.display = 'none';
			updateSection.style.display = 'none';
		});

		deleteLink.addEventListener('click', () => {
			homeSection.style.display = 'none';
			uploadSection.style.display = 'none';
			navigateSection.style.display = 'none';
			deleteSection.style.display = 'block';
			updateSection.style.display = 'none';
		});

		updateLink.addEventListener('click', () => {
			homeSection.style.display = 'none';
			uploadSection.style.display = 'none';
			navigateSection.style.display = 'none';
			deleteSection.style.display = 'none';
			updateSection.style.display = 'block';
		});
	</script>
</body>

</html>